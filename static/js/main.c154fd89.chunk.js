(this["webpackJsonpgraph-visualizer"]=this["webpackJsonpgraph-visualizer"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(7),r=n.n(o),s=(n(16),n(17),n(4)),u=n(5),l=n(3),i=n(1);function d(e){var t=e.position,n=e.id,c=e.currentNode,a=e.handleClick,o=e.isDragged;return Object(i.jsxs)("g",{transform:"translate(".concat(t.x,",").concat(t.y,")"),onMouseDown:function(e){e.stopPropagation(),a(n)},className:"node",style:{cursor:"".concat(o?"move":"")},children:[Object(i.jsx)("circle",{r:"20",fill:c===n?"#C4EDDE":"white",stroke:"black",strokeWidth:"4px"}),Object(i.jsx)("text",{x:-4.5*(1+(n>=9)),className:"unselectable",y:"5",fill:"black",children:Number(n)+1})]})}function b(e){var t=e.id,n=e.position,c=e.weight,a=e.currentEdge,o=e.handleClick,r=Math.atan2(n.y2-n.y1,n.x2-n.x1),s=(n.x1+n.x2)/2,u=5+(n.y1+n.y2)/2,l=n.x2>n.x1,d=s+10*(l?1:-1)*Math.sin(r),b=u+10*(l?-1:1)*Math.cos(r),j=180*r/Math.PI-180*!l,x=-4.5*Math.round(Math.log10(Math.abs(c))+1);return Object(i.jsxs)("g",{onMouseDown:function(e){e.stopPropagation(),o({id:t,textPosX:d,textPosY:b})},className:"edge",children:[Object(i.jsx)("line",{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,stroke:"rgba(0,0,0,0)",strokeWidth:"15px"}),Object(i.jsx)("line",{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,stroke:a&&a.id===t?"blue":"black",strokeWidth:"3px"}),Object(i.jsx)("text",{x:d,y:b,className:"unselectable",fill:a&&a.id===t?"blue":"black",transform:"rotate(".concat(j," ").concat(d," ").concat(b,") translate(").concat(x,")"),children:c})]})}var j=n(9),x=n.n(j);function f(e){var t=e.currentEdge,n=e.setCurrentEdge,a=e.handleSubmit,o=Object(c.useRef)();return Object(c.useEffect)((function(){t&&o.current&&o.current.focus()}),[t]),Object(i.jsxs)("form",{className:"edit-weight-form",onSubmit:function(e){e.preventDefault(),""!==o.current.value&&(a(t.id,o.current.value),n(null))},style:{left:"calc(".concat(t.textPosX,"px + (100vw - 480px) / 2)"),top:"calc(".concat(t.textPosY,"px + 63px)")},children:[Object(i.jsx)("input",{type:"number",ref:o,autoFocus:!0}),Object(i.jsx)("button",{type:"submit",children:Object(i.jsx)(x.a,{fontSize:"inherit",style:{marginTop:"2px",color:"white"}})})]})}n(27);function v(e,t){switch(t.name){case"add-node":return Object(l.a)(Object(l.a)({},e),{},{nodes:Object(l.a)(Object(l.a)({},e.nodes),{},Object(u.a)({},t.value.id,t.value.node))});case"add-edge":return Object(l.a)(Object(l.a)({},e),{},{edges:Object(l.a)(Object(l.a)({},e.edges),{},Object(u.a)({},t.value.id,t.value.edge))});case"delete-node":return delete e.nodes[t.value],e;case"edit-edge":return e.edges[t.value.id].w=t.value.weight,e;case"delete-edge":return delete e.edges[t.value],e;default:throw new Error}}function O(){var e=Object(c.useReducer)(v,{nodes:{},edges:{}}),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(null),r=Object(s.a)(o,2),u=r[0],l=r[1],j=Object(c.useState)(null),x=Object(s.a)(j,2),O=x[0],g=x[1],h=Object(c.useState)({x:0,y:0}),p=Object(s.a)(h,2),y=p[0],m=p[1],w=Object(c.useState)(!0),E=Object(s.a)(w,2),k=E[0],M=(E[1],Object(c.useRef)(0)),C=Object(c.useRef)(0);function D(e){a({name:"delete-edge",value:e})}function N(e){g(e),l(null)}var S=Object(c.useRef)(""),P=Object(c.useState)(!1),F=Object(s.a)(P,2),R=F[0],T=F[1];function X(e){var t,n;null==u?(Y(),l(e),S.current=setTimeout((function(){T(!0)}),100)):(t=u,n=e,a({name:"add-edge",value:{id:C.current++,edge:{u:t,v:n,w:1}}}),l(null))}function Y(){l(null),g(null)}return Object(i.jsxs)("div",{className:"draw-graph-container",children:[Object(i.jsxs)("svg",{className:"draw-graph",onMouseDown:function(e){var t,n;null==u&&null==O?(t=e.nativeEvent.offsetX,n=e.nativeEvent.offsetY,a({name:"add-node",value:{id:M.current++,node:{x:t,y:n}}})):Y()},onMouseMove:function(e){var t,n;R?(t=e.nativeEvent.offsetX,n=e.nativeEvent.offsetY,a({name:"add-node",value:{id:u,node:{x:t,y:n}}})):m({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})},onMouseUp:function(){R?(l(null),T(!1)):clearTimeout(S.current)},onKeyDown:function(e){var t;"Escape"===e.code&&(l(null),g(null)),"Delete"===e.code&&(null!=O&&D(O),null!=u&&(t=u,Object.entries(n.edges).forEach((function(e){var n=e[0],c=e[1];c.u!==t&&c.v!==t||D(n)})),a({name:"delete-node",value:t})),l(null),g(null))},tabIndex:"0",children:[null!=u&&!1===R&&Object(i.jsx)("line",{x1:n.nodes[u].x,y1:n.nodes[u].y,x2:y.x,y2:y.y,stroke:"black",strokeWidth:"3px"}),Object.entries(n.edges).map((function(e){var t=e[0],c=e[1];return Object(i.jsx)(b,{id:t,weight:k?c.w:"",position:{x1:n.nodes[c.u].x,y1:n.nodes[c.u].y,x2:n.nodes[c.v].x,y2:n.nodes[c.v].y},currentEdge:O,setCurrentEdge:g,handleClick:N},t)})),Object.entries(n.nodes).map((function(e){var t=e[0],n=e[1];return Object(i.jsx)(d,{id:t,position:n,handleClick:X,currentNode:u,isDragged:R&&t===u},t)}))]}),null!=O&&Object(i.jsx)(f,{currentEdge:O,setCurrentEdge:g,handleSubmit:function(e,t){a({name:"edit-edge",value:{id:e,weight:t}})}})]})}var g=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(O,{})})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))};r.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(g,{})}),document.getElementById("root")),h()}},[[29,1,2]]]);
//# sourceMappingURL=main.c154fd89.chunk.js.map